(function(){"use strict";var e={2762:function(e,a,t){var l=t(9242),o=t(3396);const r={class:"main"};function i(e,a,t,l,i,n){const u=(0,o.up)("the-controls"),d=(0,o.up)("the-catalog");return(0,o.wg)(),(0,o.iD)("main",r,[(0,o.Wm)(u),(0,o.Wm)(d)])}var n=t(4870),u=t(7139);const d=e=>((0,o.dD)("data-v-66412a10"),e=e(),(0,o.Cn)(),e),s={class:"sort"},c=["value"],m=d((()=>(0,o._)("option",{disabled:"",value:""},"По умолчанию",-1))),p=["value"];var v={__name:"CatalogSort",props:{modelValue:{type:String,required:!0},options:{type:Array,default:()=>[]}},emits:["update:modelValue"],setup(e,{emit:a}){const t=e=>{a("update:modelValue",e.target.value)};return(a,l)=>((0,o.wg)(),(0,o.iD)("div",s,[(0,o._)("select",{class:"sort__select",value:e.modelValue,onChange:t},[m,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.options,(e=>((0,o.wg)(),(0,o.iD)("option",{value:e.value,key:e.value},(0,u.zw)(e.label),9,p)))),128))],40,c)]))}},_=t(89);const f=(0,_.Z)(v,[["__scopeId","data-v-66412a10"]]);var g=f,b=t.p+"img/nophoto.8996dcb2.png";const h=e=>((0,o.dD)("data-v-fb6e9180"),e=e(),(0,o.Cn)(),e),S={class:"item"},y={class:"item__image"},w=["src"],U={class:"item__content"},V={class:"item__name"},k={class:"item__description"},D={class:"item__price"},O=h((()=>(0,o._)("button",null,null,-1))),j=[O];var I={__name:"CatalogItem",props:{item:{type:Object,required:!0}},emits:["delete"],setup(e,{emit:a}){const t=e,l=(0,n.Vh)(t,"item"),r=(0,o.Fl)((()=>`${l.value.price.toLocaleString()} руб.`)),i=()=>l.value.image=b,d=()=>{a("delete",l.value.id)};return(e,a)=>((0,o.wg)(),(0,o.iD)("li",S,[(0,o._)("div",y,[(0,o._)("img",{src:(0,n.SU)(l).image,alt:"Фото товара",onError:i},null,40,w)]),(0,o._)("div",U,[(0,o._)("header",V,(0,u.zw)((0,n.SU)(l).name),1),(0,o._)("div",k,(0,u.zw)((0,n.SU)(l).description),1),(0,o._)("div",D,(0,u.zw)((0,n.SU)(r)),1),(0,o._)("div",{class:"item__delete",onClick:d},j)])]))}};const q=(0,_.Z)(I,[["__scopeId","data-v-fb6e9180"]]);var C=q;const T={class:"preloader"},F=(0,o.uE)('<div class="preloader__bar" data-v-3b6e68bc><div class="preloader__runner" data-v-3b6e68bc></div><div class="preloader__runner" data-v-3b6e68bc></div><div class="preloader__runner" data-v-3b6e68bc></div><div class="preloader__runner" data-v-3b6e68bc></div><div class="preloader__runner" data-v-3b6e68bc></div></div>',1),W=[F];function x(e,a){return(0,o.wg)(),(0,o.iD)("div",T,W)}const L={},H=(0,_.Z)(L,[["render",x],["__scopeId","data-v-3b6e68bc"]]);var Z=H;const B=e=>{const a=[{label:"По наименованию",value:"name"},{label:"По цене min",value:"priceUp"},{label:"По цене max",value:"priceDown"}],t=(0,n.iH)(""),l=(0,o.Fl)((()=>{const a={name:(e,a)=>e.name.localeCompare(a.name),priceUp:(e,a)=>e.price-a.price,priceDown:(e,a)=>a.price-e.price};return[...e.value].sort(a[t.value||"name"])}));return{sortOptions:a,selectedSort:t,sortedList:l}};var z=t.p+"img/photo.43da17a7.png",P=t.p+"img/70382.872041d9.jpeg";const N=[{id:0,image:z,name:"Наименование товара 1",description:"Довольно-таки интересное описание товара в несколько строк. Довольно-таки интересное описание товара в несколько строк",price:1e4},{id:1,image:P,name:"Наименование товара 2",description:"Довольно-таки интересное описание товара в несколько строк. Довольно-таки интересное описание товара в несколько строк",price:13245},{id:2,image:z,name:"Наименование товара 3",description:"Довольно-таки интересное описание товара в несколько строк. Довольно-таки интересное описание товара в несколько строк",price:42},{id:3,image:P,name:"Наименование товара 4",description:"Довольно-таки интересное описание товара в несколько строк. Довольно-таки интересное описание товара в несколько строк",price:45e3},{id:4,image:z,name:"Наименование товара 5",description:"Довольно-таки интересное описание товара в несколько строк. Довольно-таки интересное описание товара в несколько строк",price:5},{id:5,image:P,name:"Наименование товара 6",description:"Довольно-таки интересное описание товара в несколько строк. Довольно-таки интересное описание товара в несколько строк",price:2e4},{id:6,image:z,name:"Наименование товара 7",description:"Довольно-таки интересное описание товара в несколько строк. Довольно-таки интересное описание товара в несколько строк",price:1e5}],Y=()=>new Promise((e=>{setTimeout(e,800,{data:N})})),A=Y,M="catalog",E=JSON.parse(localStorage.getItem(M)),$=(0,n.iH)(E??[]);(0,o.YP)($,(()=>{localStorage.setItem(M,JSON.stringify($.value))}));const J=e=>{const a=$.value.reduce(((e,a)=>e>a.id?e:a.id)),t={...e,id:a+1,price:+e.price.replace(/\s/g,"")};$.value=[...$.value,t]},K=e=>$.value=$.value.filter((a=>a.id!==e)),G=()=>{const e=(0,n.iH)(!1),a=async()=>{if(!E)try{e.value=!0;const a=await A();$.value=a.data}catch(a){console.error("Ошибка загрузки")}finally{e.value=!1}};return(0,o.bv)(a),{itemList:$,isLoading:e,addItem:J,deleteItem:K}},Q=e=>Object.keys(e).reduce(((e,a)=>({...e,[a]:{value:"",error:null,touched:!1}})),{}),R=e=>{const a=(0,n.iH)(Q(e)),t=()=>Object.keys(a.value).reduce(((e,t)=>({...e,[t]:a.value[t].value})),{}),l=(0,o.Fl)((()=>!Object.values(a.value).map((({error:e})=>e)).some(Boolean))),r=()=>a.value=Q(e);return{formModel:a,getFormValues:t,isFormValid:l,resetForm:r}},X={class:"catalog"},ee={class:"catalog__controls"};var ae={__name:"TheCatalog",setup(e){const{itemList:a,isLoading:t,deleteItem:r}=G(),{sortOptions:i,selectedSort:u,sortedList:d}=B(a);return(e,a)=>((0,o.wg)(),(0,o.iD)("section",X,[(0,o._)("div",ee,[(0,o.Wm)((0,n.SU)(g),{modelValue:(0,n.SU)(u),"onUpdate:modelValue":a[0]||(a[0]=e=>(0,n.dq)(u)?u.value=e:null),options:(0,n.SU)(i)},null,8,["modelValue","options"])]),(0,n.SU)(t)?((0,o.wg)(),(0,o.j4)((0,n.SU)(Z),{key:0})):((0,o.wg)(),(0,o.j4)(l.W3,{key:1,name:"list-item",tag:"ul",class:"catalog__list"},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)((0,n.SU)(d),(e=>((0,o.wg)(),(0,o.j4)((0,n.SU)(C),{item:e,key:e.id,onDelete:(0,n.SU)(r)},null,8,["item","onDelete"])))),128))])),_:1}))]))}};const te=(0,_.Z)(ae,[["__scopeId","data-v-91edce34"]]);var le=te;const oe={required:{check:e=>e.length>0,error:"Поле является обязательным"},isNumber:{check:e=>/^[\d\s]+$/.test(e),error:"Допустимы только цифры"}},re={price:e=>{const a=+e.replace(/\s/g,"");return a?Intl.NumberFormat().format(a):e}},ie={key:0,class:"label__text"},ne={key:0,class:"error"};var ue={__name:"VTextField",props:{modelValue:{type:Object,required:!0},fieldType:{validator:e=>["input","textarea"].includes(e),default:"input"},label:{type:String},placeholder:{type:String,default:null},required:{type:Boolean,default:!1},validation:{type:Array,default:()=>[]},format:{type:Function,default:null}},emits:["update:modelValue"],setup(e,{emit:a}){const t=e,r=(0,n.iH)(""),i=e=>{r.value="";for(const l of t.validation)if(!l.check(e.trim()))return r.value=l.error,void a("update:modelValue",{...t.modelValue,error:!0});a("update:modelValue",{...t.modelValue,error:!1})};(0,o.YP)((()=>t.modelValue.value),i,{immediate:!0});const d=(0,n.iH)(!1);(0,o.YP)((()=>t.modelValue.value),((e,a)=>{a.length>0&&""===e&&(d.value=!0,setTimeout((()=>d.value=!1)))}));const s=e=>{let l=e.target.value;t.format&&(l=t.format(l)),a("update:modelValue",{...t.modelValue,value:l,touched:!0})};return(a,t)=>((0,o.wg)(),(0,o.iD)("label",{class:(0,u.C_)(["label",{label_required:e.required}])},[e.label?((0,o.wg)(),(0,o.iD)("div",ie,(0,u.zw)(e.label),1)):(0,o.kq)("",!0),((0,o.wg)(),(0,o.j4)((0,o.LL)(e.fieldType),{type:"input"===e.fieldType?"text":null,placeholder:e.placeholder,class:(0,u.C_)([e.fieldType,{invalid:!!r.value&&e.modelValue.touched},{cleared:d.value}]),"aria-invalid":r.value||null,value:e.modelValue.value,onInput:s,onBlur:t[0]||(t[0]=t=>a.$emit("update:modelValue",{...e.modelValue,touched:!0}))},null,40,["type","placeholder","class","aria-invalid","value"])),(0,o.Wm)(l.uT,{name:"slide-bounce"},{default:(0,o.w5)((()=>[r.value&&e.modelValue.touched?((0,o.wg)(),(0,o.iD)("div",ne,(0,u.zw)(r.value),1)):(0,o.kq)("",!0)])),_:1})],2))}};const de=(0,_.Z)(ue,[["__scopeId","data-v-1611afed"]]);var se=de;const ce=["type"];var me={__name:"VButton",props:{label:{type:String,required:!0},submitButton:{type:Boolean,default:!1}},setup(e){return(a,t)=>((0,o.wg)(),(0,o.iD)("button",{class:"form__button",type:e.submitButton?"submit":null},(0,u.zw)(e.label),9,ce))}};const pe=(0,_.Z)(me,[["__scopeId","data-v-2728cd8f"]]);var ve=pe;const _e=["onSubmit"];var fe={__name:"FormAddItem",setup(e){const a={name:"",description:"",image:"",price:""},{formModel:t,getFormValues:r,isFormValid:i,resetForm:u}=R(a),d=(0,n.iH)(!1),s=()=>{d.value=!0,setTimeout((()=>d.value=!1),3e3)},{addItem:c,isLoading:m}=G(),p=()=>{i.value&&(c(r()),s(),u())};return(e,a)=>((0,o.wg)(),(0,o.iD)("form",{class:"form_add-item",onSubmit:(0,l.iM)(p,["prevent"])},[(0,o.Wm)((0,n.SU)(se),{modelValue:(0,n.SU)(t).name,"onUpdate:modelValue":a[0]||(a[0]=e=>(0,n.SU)(t).name=e),validation:[(0,n.SU)(oe).required],label:"Наименование товара",placeholder:"Введите наименование товара",required:""},null,8,["modelValue","validation"]),(0,o.Wm)((0,n.SU)(se),{"field-type":"textarea",modelValue:(0,n.SU)(t).description,"onUpdate:modelValue":a[1]||(a[1]=e=>(0,n.SU)(t).description=e),validation:[],label:"Описание товара",placeholder:"Введите описание товара"},null,8,["modelValue"]),(0,o.Wm)((0,n.SU)(se),{modelValue:(0,n.SU)(t).image,"onUpdate:modelValue":a[2]||(a[2]=e=>(0,n.SU)(t).image=e),validation:[(0,n.SU)(oe).required],label:"Ссылка на изображение товара",placeholder:"Введите ссылку",required:""},null,8,["modelValue","validation"]),(0,o.Wm)((0,n.SU)(se),{modelValue:(0,n.SU)(t).price,"onUpdate:modelValue":a[3]||(a[3]=e=>(0,n.SU)(t).price=e),validation:[(0,n.SU)(oe).required,(0,n.SU)(oe).isNumber],label:"Цена товара",placeholder:"Введите цену",format:(0,n.SU)(re).price,required:""},null,8,["modelValue","validation","format"]),(0,o.Wm)(l.uT,{name:"mode-shake",mode:"out-in"},{default:(0,o.w5)((()=>[d.value?((0,o.wg)(),(0,o.j4)((0,n.SU)(ve),{key:0,class:"form__status",label:"👍🏻",disabled:""})):((0,o.wg)(),(0,o.j4)((0,n.SU)(ve),{key:1,label:"Добавить товар",submitButton:"",disabled:!(0,n.SU)(i)||(0,n.SU)(m)},null,8,["disabled"]))])),_:1})],40,_e))}};const ge=(0,_.Z)(fe,[["__scopeId","data-v-7c7070a5"]]);var be=ge;const he=e=>((0,o.dD)("data-v-29dc2434"),e=e(),(0,o.Cn)(),e),Se={class:"controls"},ye=he((()=>(0,o._)("header",{class:"controls__title"},[(0,o._)("h2",null,"Добавление товара")],-1)));var we={__name:"TheControls",setup(e){return(e,a)=>((0,o.wg)(),(0,o.iD)("aside",Se,[ye,(0,o.Wm)((0,n.SU)(be))]))}};const Ue=(0,_.Z)(we,[["__scopeId","data-v-29dc2434"]]);var Ve=Ue,ke={name:"App",components:{TheCatalog:le,TheControls:Ve}};const De=(0,_.Z)(ke,[["render",i]]);var Oe=De;(0,l.ri)(Oe).mount("#app")}},a={};function t(l){var o=a[l];if(void 0!==o)return o.exports;var r=a[l]={exports:{}};return e[l](r,r.exports,t),r.exports}t.m=e,function(){var e=[];t.O=function(a,l,o,r){if(!l){var i=1/0;for(s=0;s<e.length;s++){l=e[s][0],o=e[s][1],r=e[s][2];for(var n=!0,u=0;u<l.length;u++)(!1&r||i>=r)&&Object.keys(t.O).every((function(e){return t.O[e](l[u])}))?l.splice(u--,1):(n=!1,r<i&&(i=r));if(n){e.splice(s--,1);var d=o();void 0!==d&&(a=d)}}return a}r=r||0;for(var s=e.length;s>0&&e[s-1][2]>r;s--)e[s]=e[s-1];e[s]=[l,o,r]}}(),function(){t.n=function(e){var a=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(a,{a:a}),a}}(),function(){t.d=function(e,a){for(var l in a)t.o(a,l)&&!t.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:a[l]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)}}(),function(){t.p="/vue-composite/"}(),function(){var e={143:0};t.O.j=function(a){return 0===e[a]};var a=function(a,l){var o,r,i=l[0],n=l[1],u=l[2],d=0;if(i.some((function(a){return 0!==e[a]}))){for(o in n)t.o(n,o)&&(t.m[o]=n[o]);if(u)var s=u(t)}for(a&&a(l);d<i.length;d++)r=i[d],t.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return t.O(s)},l=self["webpackChunkvue_composite"]=self["webpackChunkvue_composite"]||[];l.forEach(a.bind(null,0)),l.push=a.bind(null,l.push.bind(l))}();var l=t.O(void 0,[998],(function(){return t(2762)}));l=t.O(l)})();
//# sourceMappingURL=app.1cfbb30e.js.map